#!/usr/bin/env python
from gazelle.datascope import Database
from seispy.gather3c import Gather
import matplotlib.pyplot as plt
savedir = "/home/shake/malcolcw/projects/SJFZ/figures"
#db = Database("/Users/malcolcw/products/catalog/SJFZ/2015/SJFZ_2015")
for year in range(2012, 2016):
    db = Database("/home/shake/malcolcw/products/catalog/SJFZ/%d/SJFZ_%d" 
                  % (year, year))
    for origin in db.iterate_origins(subset="auth =~ /malcolcw:reloc/"
                                     "&& magnitude > 4.0"):
        print origin
        try:
            fig = db.plot_origin(origin,
                                 show=False,
                                 savefig="%s/%d_%d.png" % (savedir, year, origin.evid))
            plt.close()
        except ValueError:
            print "error"
            raise
            continue
