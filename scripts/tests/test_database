#!/usr/bin/env python
import site
site.addsitedir("/usr/lib64/python2.7/site-packages")
from obspy.core.utcdatetime import UTCDateTime

from gazelle.datascope import Database
from seispy.core import Arrival, Trace

db = Database('/home/shake/malcolcw/data/wfs/ramona')
network = db.parse_network('YN')
station = network.stations['RA09']
time= UTCDateTime(year=2015, julday=001, hour=6, minute=9)
while True:
    print time
    gather = db.get_gather3c(station,
                             station.get_channel_set("HN"),
                             time,
                             time + 10)
    arrival = Arrival('RA09', 'HNZ', time + 5, 'S')
    gather.plot(arrivals=[arrival], xticklabel_fmt="%H:%M:%S.%f")
    time += 60
    exit()
db.close()
